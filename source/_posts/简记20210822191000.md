---
title: 简记20210822191000
date: 2021-08-22 17:43:00
categories: 简记
tags: []
copyright: true #新增,开启
---

<!--more-->
# 三、能RUN就行
这是一则真实的段子
```
有人在网上发帖提问
提问者：自己写的代码太难看了怎么办？
路人A：能run吗？
提问者：我run还是代码run？
路人B：有一个能run就行
```
不得不说，真的是人间真实。接下来我们聊一聊，该如何做到“能RUN就行”。

记得在我刚刚实习的时候，一段简单的代码写了改，改了写，最后推到重构。写完了，自己看着代码非常愉悦，但却又因几天后的一个紧急需求，不得不改成他最初的样子。

经过了一年的修修补补，我理解了什么叫“能RUN就行”。当然，这仅针对业务代码而言，因为业务需要紧跟市场脚步，需要的是最短时间代码能RUN，不宕机，而且后面还改的动，能坚持到下次被重构，这就是一份代码的使命。

之前我曾看到有人这么评价业务架构师（注意是业务）
```
程序员的作用是堆粪。架构师的作用是搭架子。
屎山堆高，自己就塌了。有架子在，尽管臭，却能用
```

实在是很形象了。

平时我们设计方案也是如此，方案不是越复杂越好，难的不是把方案完成，而是把复杂方案简单化。

比如说才几万条数据，没啥热点，未来2年也不会增长到接近几百万，这时候来个分库分表，实属闲的。等到后面做编码的时候，这分库分表的编码复杂度反而得不偿失。

又比如各个表都是按相同维度进行分表，你经过一系列的分析，算出来这个表该分表10张，另一个15张，再来一个50张。  
当你接到个批量跨表数据分析工作，麻烦就来了。
- 扫全表，压力大。
- 扫单表，你就只能根据分表id计算最大公倍数，再来hash到对应分表  

或许这里有人会反驳，数据分析这种东西，不都是用数仓么？  
但是这仅是个例子，不是所有的公司都支撑的起数仓，也不是所有的数据分析业务都需要放到数仓去跑

我曾经也是追逐“完美”的人，但在追逐过程中我学到：  
世上并没有真正的完美，但从一种角度，它是完美的。但换一种角度，丑陋不堪。最终美好的仅是综合情况下的取舍。

话说回来，一切都要讲究变通。  

曾经我见过有人为了尽量少的采用中间件，用mysql来控制并发场景下的库存，还设计预分配库存量等机制。  
显然，运行了一段时间后QPS上来，程序RUN实在不动，人RUN了。  
我们只能含泪接手代码，花费大力气把他的设计废掉改用redis

总之，不要为了复杂而复杂，也不要为了简化而简化，凡事讲究有度。
